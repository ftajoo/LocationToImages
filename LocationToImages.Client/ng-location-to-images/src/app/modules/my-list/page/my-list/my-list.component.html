<form class="search-container" fxLayout="column" (ngSubmit)="onSubmit()" [formGroup]="formSearch">
  <div class="search" fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px" fxLayoutAlign="top start">
    <mat-form-field appearance="outline" class="full-width-field form-field-with-button">
      <mat-label>Select location</mat-label>
      <mat-select formControlName="geoLocation">
        <mat-option *ngFor="let geoLocation of geoLocations" [value]="geoLocation.Id" matTooltipPosition="after">
          {{ geoLocation.Address }}
        </mat-option>
      </mat-select>
      <button type="submit" matSuffix mat-mini-fab aria-label="Search" color="primary"
        [disabled]="formSearch.invalid || !f['geoLocation'].value || isLoading || isLoadingGeoLocations"
        (click)="$event.stopPropagation()">
        <ng-container *ngIf="!isLoadingGeoLocations else loadingGeoLocations">
          <mat-icon>search</mat-icon>
        </ng-container>
      </button>
      <mat-hint align="start">Select location from list</mat-hint>
    </mat-form-field>
  </div>
</form>

<div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="1rem" class="button-add-location" *ngIf="photos.length > 0">
  <button mat-raised-button color="warn" (click)="removeLocation()">
    <ng-container *ngIf="!isLoadingRemoveLocation else loadingButton">
      Remove from list
    </ng-container>
  </button>
</div>

<mat-divider class="photos-divider"></mat-divider>

<ng-container *ngIf="!isLoading else loading">
  <ng-container *ngIf="photosFiltered.length > 0 else noPhotos">
    <mat-paginator [length]="photos.length" [pageSize]="pageSize" (page)="onPage($event)" aria-label="Select page">
    </mat-paginator>
    <div class="photos-container" fxLayout="row wrap" fxLayoutGap="1rem grid" fxLayoutAlign="center top"
      [@listAnimation]="photos.length">
      <app-photo-card *ngFor="let photo of photosFiltered" [photo]="photo"></app-photo-card>
    </div>
  </ng-container>
</ng-container>

<ng-template #loading>
  <div class="loading-container" fxLayout="row" fxLayoutAlign="center center" @fadeAnimation fxFlexFill>
    <mat-spinner diameter="64" strokeWidth="8"></mat-spinner>
  </div>
</ng-template>

<ng-template #loadingGeoLocations>
  <mat-spinner diameter="24" strokeWidth="3"></mat-spinner>
</ng-template>

<ng-template #loadingButton>
  <div fxLayout="row" fxLayoutAlign="center" class="button-spinner">
    <mat-spinner diameter="24" strokeWidth="3" color="accent"></mat-spinner>
  </div>
</ng-template>

<ng-template #noPhotos>
  <div fxLayout="row" fxLayoutAlign="center top" class="no-photos">
    No photos available
  </div>
</ng-template>
